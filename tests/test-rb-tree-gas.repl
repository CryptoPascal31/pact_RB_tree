(load "init.repl")

(begin-tx)
(load "test-vectors-gas.pact")
(commit-tx)

(begin-tx)
(use rb-tree)
(env-sigs [{'key:"op", 'caps:[(INIT-TREE)] }])
(env-data {'ks-access:["access"]})
(init-tree "MyTree" (read-keyset 'ks-access) 100000000000.0)
(commit-tx)

(begin-tx)
(use rb-tree)
(env-sigs [{'key:"access", 'caps:[(INSERT-DELETE)] }])
(env-gasmodel "table")
(env-gaslimit 10000000000)

(env-enable-repl-natives true)

(module test-gas G
  (defcap G () true)
  (use rb-tree)
  (use free.util-strings)

  (defun do-test (insert-refs insert-keys delete-refs)
    {"insert": (zip (lambda (x y) (do (env-gas 0) (insert-value "MyTree" x y) (env-gas))) insert-refs insert-keys),
     "remove": (map (lambda (x) (do (env-gas 0) (delete-value x) (env-gas))) delete-refs)}
  )

  (defun do-test-print (insert-refs insert-keys delete-refs)
    (print (+ "OUT:" (to-string (do-test insert-refs insert-keys delete-refs))))
  )
)
(env-enable-repl-natives false)
(commit-tx)



(begin-tx)
(use test-vectors)
(use test-gas)
(use rb-tree)
(zip (insert-value "MyTree") REFS-TEST-100-INIT KEYS-TEST-100-INIT)
(commit-tx)

(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-00 KEYS-TEST-100-00 REFS-REMOVE-TEST-100-00)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-01 KEYS-TEST-100-01 REFS-REMOVE-TEST-100-01)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-02 KEYS-TEST-100-02 REFS-REMOVE-TEST-100-02)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-03 KEYS-TEST-100-03 REFS-REMOVE-TEST-100-03)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-04 KEYS-TEST-100-04 REFS-REMOVE-TEST-100-04)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-05 KEYS-TEST-100-05 REFS-REMOVE-TEST-100-05)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-06 KEYS-TEST-100-06 REFS-REMOVE-TEST-100-06)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-07 KEYS-TEST-100-07 REFS-REMOVE-TEST-100-07)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-08 KEYS-TEST-100-08 REFS-REMOVE-TEST-100-08)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-09 KEYS-TEST-100-09 REFS-REMOVE-TEST-100-09)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-10 KEYS-TEST-100-10 REFS-REMOVE-TEST-100-10)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-11 KEYS-TEST-100-11 REFS-REMOVE-TEST-100-11)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-12 KEYS-TEST-100-12 REFS-REMOVE-TEST-100-12)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-13 KEYS-TEST-100-13 REFS-REMOVE-TEST-100-13)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-14 KEYS-TEST-100-14 REFS-REMOVE-TEST-100-14)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-15 KEYS-TEST-100-15 REFS-REMOVE-TEST-100-15)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-16 KEYS-TEST-100-16 REFS-REMOVE-TEST-100-16)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-17 KEYS-TEST-100-17 REFS-REMOVE-TEST-100-17)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-18 KEYS-TEST-100-18 REFS-REMOVE-TEST-100-18)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-19 KEYS-TEST-100-19 REFS-REMOVE-TEST-100-19)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-20 KEYS-TEST-100-20 REFS-REMOVE-TEST-100-20)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-21 KEYS-TEST-100-21 REFS-REMOVE-TEST-100-21)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-22 KEYS-TEST-100-22 REFS-REMOVE-TEST-100-22)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-23 KEYS-TEST-100-23 REFS-REMOVE-TEST-100-23)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-24 KEYS-TEST-100-24 REFS-REMOVE-TEST-100-24)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-25 KEYS-TEST-100-25 REFS-REMOVE-TEST-100-25)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-26 KEYS-TEST-100-26 REFS-REMOVE-TEST-100-26)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-27 KEYS-TEST-100-27 REFS-REMOVE-TEST-100-27)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-28 KEYS-TEST-100-28 REFS-REMOVE-TEST-100-28)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-29 KEYS-TEST-100-29 REFS-REMOVE-TEST-100-29)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-30 KEYS-TEST-100-30 REFS-REMOVE-TEST-100-30)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-31 KEYS-TEST-100-31 REFS-REMOVE-TEST-100-31)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-32 KEYS-TEST-100-32 REFS-REMOVE-TEST-100-32)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-33 KEYS-TEST-100-33 REFS-REMOVE-TEST-100-33)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-34 KEYS-TEST-100-34 REFS-REMOVE-TEST-100-34)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-35 KEYS-TEST-100-35 REFS-REMOVE-TEST-100-35)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-36 KEYS-TEST-100-36 REFS-REMOVE-TEST-100-36)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-37 KEYS-TEST-100-37 REFS-REMOVE-TEST-100-37)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-38 KEYS-TEST-100-38 REFS-REMOVE-TEST-100-38)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-39 KEYS-TEST-100-39 REFS-REMOVE-TEST-100-39)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-40 KEYS-TEST-100-40 REFS-REMOVE-TEST-100-40)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-41 KEYS-TEST-100-41 REFS-REMOVE-TEST-100-41)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-42 KEYS-TEST-100-42 REFS-REMOVE-TEST-100-42)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-43 KEYS-TEST-100-43 REFS-REMOVE-TEST-100-43)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-44 KEYS-TEST-100-44 REFS-REMOVE-TEST-100-44)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-45 KEYS-TEST-100-45 REFS-REMOVE-TEST-100-45)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-46 KEYS-TEST-100-46 REFS-REMOVE-TEST-100-46)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-47 KEYS-TEST-100-47 REFS-REMOVE-TEST-100-47)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-48 KEYS-TEST-100-48 REFS-REMOVE-TEST-100-48)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-49 KEYS-TEST-100-49 REFS-REMOVE-TEST-100-49)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-50 KEYS-TEST-100-50 REFS-REMOVE-TEST-100-50)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-51 KEYS-TEST-100-51 REFS-REMOVE-TEST-100-51)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-52 KEYS-TEST-100-52 REFS-REMOVE-TEST-100-52)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-53 KEYS-TEST-100-53 REFS-REMOVE-TEST-100-53)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-54 KEYS-TEST-100-54 REFS-REMOVE-TEST-100-54)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-55 KEYS-TEST-100-55 REFS-REMOVE-TEST-100-55)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-56 KEYS-TEST-100-56 REFS-REMOVE-TEST-100-56)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-57 KEYS-TEST-100-57 REFS-REMOVE-TEST-100-57)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-58 KEYS-TEST-100-58 REFS-REMOVE-TEST-100-58)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-59 KEYS-TEST-100-59 REFS-REMOVE-TEST-100-59)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-60 KEYS-TEST-100-60 REFS-REMOVE-TEST-100-60)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-61 KEYS-TEST-100-61 REFS-REMOVE-TEST-100-61)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-62 KEYS-TEST-100-62 REFS-REMOVE-TEST-100-62)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-63 KEYS-TEST-100-63 REFS-REMOVE-TEST-100-63)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-64 KEYS-TEST-100-64 REFS-REMOVE-TEST-100-64)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-65 KEYS-TEST-100-65 REFS-REMOVE-TEST-100-65)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-66 KEYS-TEST-100-66 REFS-REMOVE-TEST-100-66)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-67 KEYS-TEST-100-67 REFS-REMOVE-TEST-100-67)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-68 KEYS-TEST-100-68 REFS-REMOVE-TEST-100-68)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-69 KEYS-TEST-100-69 REFS-REMOVE-TEST-100-69)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-70 KEYS-TEST-100-70 REFS-REMOVE-TEST-100-70)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-71 KEYS-TEST-100-71 REFS-REMOVE-TEST-100-71)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-72 KEYS-TEST-100-72 REFS-REMOVE-TEST-100-72)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-73 KEYS-TEST-100-73 REFS-REMOVE-TEST-100-73)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-74 KEYS-TEST-100-74 REFS-REMOVE-TEST-100-74)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-75 KEYS-TEST-100-75 REFS-REMOVE-TEST-100-75)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-76 KEYS-TEST-100-76 REFS-REMOVE-TEST-100-76)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-77 KEYS-TEST-100-77 REFS-REMOVE-TEST-100-77)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-78 KEYS-TEST-100-78 REFS-REMOVE-TEST-100-78)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-79 KEYS-TEST-100-79 REFS-REMOVE-TEST-100-79)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-80 KEYS-TEST-100-80 REFS-REMOVE-TEST-100-80)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-81 KEYS-TEST-100-81 REFS-REMOVE-TEST-100-81)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-82 KEYS-TEST-100-82 REFS-REMOVE-TEST-100-82)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-83 KEYS-TEST-100-83 REFS-REMOVE-TEST-100-83)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-84 KEYS-TEST-100-84 REFS-REMOVE-TEST-100-84)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-85 KEYS-TEST-100-85 REFS-REMOVE-TEST-100-85)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-86 KEYS-TEST-100-86 REFS-REMOVE-TEST-100-86)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-87 KEYS-TEST-100-87 REFS-REMOVE-TEST-100-87)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-88 KEYS-TEST-100-88 REFS-REMOVE-TEST-100-88)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-89 KEYS-TEST-100-89 REFS-REMOVE-TEST-100-89)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-90 KEYS-TEST-100-90 REFS-REMOVE-TEST-100-90)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-91 KEYS-TEST-100-91 REFS-REMOVE-TEST-100-91)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-92 KEYS-TEST-100-92 REFS-REMOVE-TEST-100-92)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-93 KEYS-TEST-100-93 REFS-REMOVE-TEST-100-93)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-94 KEYS-TEST-100-94 REFS-REMOVE-TEST-100-94)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-95 KEYS-TEST-100-95 REFS-REMOVE-TEST-100-95)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-96 KEYS-TEST-100-96 REFS-REMOVE-TEST-100-96)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-97 KEYS-TEST-100-97 REFS-REMOVE-TEST-100-97)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-98 KEYS-TEST-100-98 REFS-REMOVE-TEST-100-98)(commit-tx)
(begin-tx)(use test-vectors)(test-gas.do-test-print REFS-TEST-100-99 KEYS-TEST-100-99 REFS-REMOVE-TEST-100-99)(commit-tx)
